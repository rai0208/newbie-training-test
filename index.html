<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>社内教育テスト（自由記述提出用）</title>
  <style>
    :root {
      --primary-color: #2563eb;
      --primary-hover: #1d4ed8;
      --success-color: #10b981;
      --bg-color: #f3f4f6;
      --card-bg: #ffffff;
      --text-main: #1f2937;
      --text-sub: #6b7280;
      --border-color: #e5e7eb;
    }

    body {
      font-family: "Helvetica Neue", Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
      margin: 0;
      padding: 20px;
      background: var(--bg-color);
      color: var(--text-main);
      line-height: 1.6;
    }

    .container {
      max-width: 700px;
      margin: 0 auto;
    }

    .card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      margin-bottom: 20px;
      transition: all 0.3s ease;
    }

    h1 {
      text-align: center;
      font-size: 1.5rem;
      margin-bottom: 24px;
      color: var(--text-main);
    }

    h2 {
      font-size: 1.25rem;
      margin-top: 0;
      border-bottom: 2px solid var(--primary-color);
      padding-bottom: 8px;
      display: inline-block;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      padding: 12px 20px;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background-color 0.2s, transform 0.1s;
      margin-bottom: 12px;
      text-decoration: none;
      text-align: center;
      box-sizing: border-box;
    }

    .btn:active {
      transform: scale(0.98);
    }

    .btn-primary {
      background: var(--primary-color);
      color: white;
    }

    .btn-primary:hover {
      background: var(--primary-hover);
    }

    .btn-success {
      background: var(--success-color);
      color: white;
    }

    .btn-success:hover {
      background: #059669;
    }

    .btn-secondary {
      background: white;
      color: var(--primary-color);
      border: 2px solid var(--primary-color);
    }

    .btn-secondary:hover {
      background: #eff6ff;
    }

    textarea {
      width: 100%;
      min-height: 100px;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid var(--border-color);
      font-size: 1rem;
      font-family: inherit;
      resize: vertical;
      margin-bottom: 16px;
      box-sizing: border-box;
    }

    textarea:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    input[type="text"] {
      width: 100%;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid var(--border-color);
      font-size: 1rem;
      font-family: inherit;
      margin-bottom: 20px;
      box-sizing: border-box;
    }

    input[type="text"]:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    .hidden { display: none !important; }
    .fade-in { animation: fadeIn 0.3s ease-in; }
    .text-center { text-align: center; }
    .mt-4 { margin-top: 16px; }
    .mb-2 { margin-bottom: 8px; }

    .badge {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.85rem;
      font-weight: bold;
      background: #e0e7ff;
      color: #3730a3;
      margin-bottom: 8px;
    }

    .progress-container {
      background: #e5e7eb;
      border-radius: 999px;
      height: 8px;
      margin-bottom: 20px;
      overflow: hidden;
    }
    .progress-bar {
      background: var(--primary-color);
      height: 100%;
      width: 0%;
      transition: width 0.3s ease;
    }

    .label {
      font-size: 0.75rem;
      color: var(--text-sub);
      font-weight: bold;
      text-transform: uppercase;
      margin-bottom: 4px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>

<div class="container">
  <h1>社内教育テスト <span style="font-size:0.6em; color:#666;">（自由記述提出用）</span></h1>

  <!-- 1. Start Screen -->
  <div id="start-screen" class="card fade-in">
    <h2 class="text-center">コース選択</h2>
<p class="text-center mb-2" style="margin-top: 20px;">
      挑戦するレベルを選択してください。（各レベル10問をランダムに出題します）
    </p>
    <div style="margin-top: 12px;">
      <button class="btn btn-primary" onclick="app.startQuiz(1)">
        <div><strong>Lv1：基礎知識</strong><br>
          <span style="font-size:0.85em; font-weight:normal;">主要部材の名称や役割の基礎（ランダム10問）</span>
        </div>
      </button>
      <button class="btn btn-primary" onclick="app.startQuiz(2)">
        <div><strong>Lv2：システム理解</strong><br>
          <span style="font-size:0.85em; font-weight:normal;">換気方式の特徴や設置・運用時の注意点（ランダム10問）</span>
        </div>
      </button>
      <button class="btn btn-primary" onclick="app.startQuiz(3)">
        <div><strong>Lv3：実践応用</strong><br>
          <span style="font-size:0.85em; font-weight:normal;">風量・静圧の関係、トラブルシューティング、計算基礎（ランダム10問）</span>
        </div>
      </button>
    </div>
  </div>

  <!-- 2. Quiz Screen -->
  <div id="quiz-screen" class="card hidden">
    <div class="progress-container">
      <div id="progress-bar" class="progress-bar"></div>
    </div>
    <div class="text-center mb-2">
      <span id="question-count" class="badge">Q 1/10</span>
    </div>

    <h3 id="question-text" style="font-size:1.2rem; margin-bottom:16px;">ここに問題が表示されます</h3>

    <div class="label">あなたの回答</div>
    <textarea id="answer-input" placeholder="ここに回答を入力してください"></textarea>

    <div style="display:flex; gap:12px; margin-top:4px;">
      <button id="prev-btn" class="btn btn-secondary" style="flex:1;">前の問題に戻る</button>
      <button id="submit-btn" class="btn btn-primary" style="flex:1;">次へ進む</button>
    </div>
  </div>

  <!-- 3. Result Screen (Submission) -->
  <div id="result-screen" class="card hidden">
    <h2 class="text-center">回答完了</h2>

    <p class="text-center" style="margin-top: 20px; font-weight: bold;">
      お疲れ様でした。回答内容を上長に提出してください。
    </p>

    <div class="label" style="margin-top: 20px;">あなたの回答内容（自動生成）</div>
    <textarea id="send-text" readonly style="min-height: 250px; font-size: 0.85rem; color:#555; background:#f9fafb;"></textarea>

    <!-- 常にコピー専用ボタンにする -->
    <button id="action-btn" class="btn btn-success mt-4">回答内容をコピー</button>
    <div id="copy-message" class="text-center hidden" style="color:var(--success-color); font-weight:bold; margin-top:-8px; margin-bottom:12px;"></div>

    <button class="btn btn-secondary mt-4" onclick="location.reload()">トップに戻る</button>
  </div>

</div>

<script>
/**
 * Test Application Logic
 * 自己採点なし・自由記述提出ツール
 */
window.app = {
  // Constants
  NUM_QUESTIONS: 10,

  // State
  questions: [],
  currentLevel: 0,
  currentIndex: 0,
  userAnswers: [], // indexごとに { question, userText }
  userName: '',

  // 問題データ
  database: [
    // --- Lv1：基礎知識 ---
    { id: 1, level: 1, text: "ダクト内を流れる風量を調整するためのダンパーを何と言いますか？", model: "VD（Volume Damper）。風量調整ダンパー。ダクト内の風量を調整し、各系統のバランスを整える部材。" },
    { id: 2, level: 1, text: "FDの正式名称と役割を説明してください。", model: "FD（Fire Damper）。防火ダンパー。火災時にヒューズが溶けて閉鎖し、延焼を防ぐ。" },
    { id: 3, level: 1, text: "グラスウールとロックウールの使い分けを説明してください。", model: "グラスウールは主に保温・保冷（一般空調）。ロックウールは耐火・耐熱性が高く、厨房排気や高温ダクトに使用する。" },
    { id: 4, level: 1, text: "セラカバーの主な用途は何ですか？", model: "ロックウールの成形品で、主に厨房排気ダクトの断熱・防火措置に使用する。施工が容易。" },
    { id: 5, level: 1, text: "フレキシブルダクトの使用上の注意点は？（長さなど）", model: "抵抗が大きいため、必要最小限（一般的に2m以内）にする。曲がりを急にしない。" },
    { id: 6, level: 1, text: "キャンバスダクト（たわみ継手）の役割は？", model: "送風機などの振動をダクトに伝えないための防振継手。" },
    { id: 7, level: 1, text: "排気ダクトの途中に設ける「点検口」の役割は？", model: "ダクト内の清掃、FD（防火ダンパー）のヒューズ交換、VDの調整など、メンテナンスのため。" },
    { id: 8, level: 1, text: "外壁ガラリに防虫網を付けるメリットとデメリットは？", model: "メリット：虫の侵入防止。デメリット：目詰まりしやすく、メンテナンスを怠ると給気不足になる。" },
    { id: 9, level: 1, text: "グリスフィルターの役割を説明してください。", model: "油脂分を除去し、ダクト内への油の侵入を防ぐ。火災延焼防止機能（F値）を持つものもある。" },
    { id: 10, level: 1, text: "火災時に防火区画の延焼を防ぐために、一定温度に達すると自動で閉鎖するダンパーを何と言いますか？", model: "防火ダンパー。火災時にヒューズが溶けて閉鎖し、延焼を防ぐ。" },
    { id: 11, level: 1, text: "給気ダクトに断熱材を巻く主な目的を2つ説明してください。", model: "①結露防止（特に冷房時の給気）。②熱損失防止（暖房時）。③消音効果（限定的）。" },
    { id: 12, level: 1, text: "一般空調のダクト内張り材として使用される材料を挙げてください。", model: "グラスウールなどの断熱材。" },
    { id: 13, level: 1, text: "SAとRAの正式名称と意味を説明してください。", model: "SA: Supply Air（給気）。RA: Return Air（還気）。" },
    { id: 14, level: 1, text: "フレキダクトの接続部に使われるアルミテープの役割は？", model: "ダクト内の気密性を保ち、空気の漏れを防ぐこと。耐火・耐熱性も確保するため。" },
    { id: 15, level: 1, text: "キャンバスダクト（防振ジョイント）を設置する機器を2つ挙げてください。", model: "シロッコファン、ミニシロッコファン、ストレートシロッコファンなど。" },
    { id: 16, level: 1, text: "ダクトの継手部分で、空気の漏れ（リーク）を防ぐための一般的な対策は？", model: "パッキン、シーリング材（コーキング）、気密テープの使用。" },

    // --- Lv2：システム理解 ---
    { id: 21, level: 2, text: "第1種換気の特徴とメリットを説明してください。", model: "給気・排気ともに機械で行う方式。室圧コントロールが容易で、確実な換気ができる。" },
    { id: 22, level: 2, text: "第3種換気が厨房に適している理由（または一般的である理由）は？", model: "排気のみ機械で行うため室内が負圧になり、厨房の臭気や熱気が客席へ流出しにくいため。" },
    { id: 23, level: 2, text: "飲食店で第2種換気（給気のみ機械）がNGとされる理由は？", model: "室内が正圧になり、臭気が外部や他区画へ漏れ出すため。" },
    { id: 24, level: 2, text: "ショートサーキットとはどのような現象ですか？", model: "給気口と排気口が近すぎて、給気した空気がそのまま排気されてしまい、換気が行われない現象。" },
    { id: 25, level: 2, text: "「負圧が強すぎてドアが開かない」場合の対策は？", model: "給気量を増やす、または排気量を絞って室内の負圧を弱める。" },
    { id: 26, level: 2, text: "無煙ロースター（下方排気）の施工上のデメリット・注意点は？", model: "床下にダクトを通すため、配管勾配（油だまり）や清掃口の設置、防水対策が必要。コストも高い。" },
    { id: 27, level: 2, text: "ダクト内風速が速すぎることの弊害を2つ挙げてください。", model: "①騒音（風切り音）の発生。②圧力損失の増大（ファンへの負荷増）。" },
    { id: 28, level: 2, text: "給気口の配置で、客席において注意すべきことは？", model: "ドラフト（不快な気流）が客に直接当たらない位置・風速にすること。" },
    { id: 29, level: 2, text: "厨房フードの「面風速」の目安は？", model: "一般的に0.3m/s〜0.5m/s程度。" },
    { id: 30, level: 2, text: "インバーター制御をファンに導入するメリットは？", model: "周波数を変えて風量を調整できるため、試運転調整が容易で、省エネ効果も見込める。" },
    { id: 31, level: 2, text: "全熱交換器（ロスナイなど）の設置目的とデメリットを説明してください。", model: "目的：排気熱を回収し、外気の給気温度を近づけることで空調負荷を軽減。デメリット：排気側と給気側の空気が混ざり、臭気が戻る場合がある。風量に対して機器が大きい。" },
    { id: 32, level: 2, text: "換気設備における「結露」の主な発生原因と対策は？", model: "原因：ダクト表面温度と周囲空気温度の差。対策：断熱材の適切な施工、または温度差を少なくする。" },
    { id: 33, level: 2, text: "VAV（可変風量）システムとCAV（定風量）システムの使い分けは？", model: "VAV：負荷変動に応じて風量を変え、省エネに優れる。CAV：一定風量で室圧・温湿度管理を安定させる。" },
    { id: 34, level: 2, text: "排煙ダンパー（SD）の動作原理の違いを説明してください。", model: "FD：ヒューズが溶けて自動閉鎖（防火）。SD：火災感知器と連動して遠隔操作で開閉（排煙）。" },
    { id: 35, level: 2, text: "天井裏をダクトルートとして利用する際の注意点を2つ以上挙げてください。", model: "①点検口の確保。②他の設備（電気配線、配管）との干渉回避。③ダクトの気密性確保。" },
    { id: 36, level: 2, text: "厨房排気ファンでベルト駆動式が多い理由を説明してください。", model: "プーリー交換で容易に風量調整ができ、モーターを熱や油汚れから離して配置できるため。" },
    { id: 37, level: 2, text: "風量測定値が設計値と大きく異なる場合に確認すべき点を2つ挙げてください。", model: "①VD（ダンパー）が全開か。②ベルトの回転方向は合ってるか（逆相ではないか）。③ダクトの漏れ・閉塞がないか。" },

    // --- Lv3：実践応用 ---
    { id: 41, level: 3, text: "風量 Q (m³/h) を求める基本式は？（風速V、面積Aを使って）", model: "Q = A × V × 3600 （A:断面積[m²], V:風速[m/s]）" },
    { id: 42, level: 3, text: "ダクトの「アスペクト比」とは何か。推奨される制限は？", model: "ダクトの長辺と短辺の比率。一般に4:1以下が望ましい。" },
    { id: 43, level: 3, text: "チャンバーボックスの役割を2つ挙げてください。", model: "①分岐や合流をスムーズにする。②消音効果（内貼りがある場合）。" },
    { id: 44, level: 3, text: "ダクト径を半分にすると、抵抗（圧損）は理論上どうなるか？", model: "同じ風量を流そうとすると流速が4倍になり、圧損は大幅に増加する。" },
    { id: 45, level: 3, text: "送風機の「サージング」とはどのような現象か？", model: "風量・圧力が周期的に変動し、激しい振動や騒音を伴う不安定運転現象。" },
    { id: 46, level: 3, text: "ダクト径を小さくしすぎると何が起こりますか？風速・圧損・騒音の観点から説明してください。", model: "風速は速くなる、圧損は大きくなる、騒音は大きくなる" },
    { id: 47, level: 3, text: "エルボ（曲がり）が多いダクト経路で風量が落ちやすい理由を説明してください。", model: "抵抗（静圧）が掛かるから。※適したファンを選定すれば問題ない" },
    { id: 48, level: 3, text: "東産業では90°エルボは何Paで計算しますか？", model: "15Pa" },
    { id: 49, level: 3, text: "厨房排気ファンの選定で、静圧計算時に特に考慮すべき抵抗要素は？", model: "エルボの数、ダクトサイズ、グリスフィルター、防火ダンパー、防虫網、外部フード、および油汚れによる経年劣化分。" },
    { id: 50, level: 3, text: "ダクト断面を途中で小さくすると風速と静圧はどう変化しますか？", model: "風速は速くなる、静圧は大きくなる" },
    { id: 51, level: 3, text: "ファンの静圧を強くしすぎた場合の悪影響を1つ挙げて説明してください。", model: "風切り音が大きくなる、ダクトの振動が大きくなる、サージングが発生する" },
    { id: 52, level: 3, text: "局所排気の設計において、フードの捕集効率を上げるための基本的な考え方は？", model: "①フードを発生源にできるだけ近づける。②発生源を囲い込む。③周りの気流を乱さない。" },
    { id: 53, level: 3, text: "ダクト曲がり部（エルボ）の抵抗（圧損）を減らすための工夫を2つ挙げてください。", model: "①曲がり半径を大きくする。②案内羽根（ガイドベーン）を設ける。" },
    { id: 54, level: 3, text: "TAB（Testing, Adjusting and Balancing）作業の最終的な目的を説明してください。", model: "設計図通りの風量・静圧・温湿度が各吹出口・吸込口で確実に出ている状態に調整すること。" },
    { id: 55, level: 3, text: "静圧測定に使う「ピトー管」の測定原理を説明してください。", model: "全圧と静圧の差から動圧を求め、その値から風速を算出する。" },
    { id: 56, level: 3, text: "高層ビルの換気計画で考慮すべき「スタック効果（煙突効果）」とは何か？", model: "建物の内外の温度差・密度差により、上下方向の自然気流が発生する現象。" },
    { id: 57, level: 3, text: "客席側の吹出風量が大きすぎて不快感が出る場合、どのような調整案がありますか？", model: "ドラフト板を取り付ける、排気風量を落とし、給気量を減らす" },
    { id: 58, level: 3, text: "ファン騒音対策として、ダクト経路に追加できる部材を2つ挙げてください。", model: "①サイレンサー（消音器）。②内張り消音ダクト。③内張り付きチャンバーボックス。" },
    { id: 59, level: 3, text: "圧力損失（圧損）を低減するための設計上の工夫を2つ挙げてください。", model: "①ダクトの風速を下げる（径を大きくする）。②エルボや分岐をなだらかにする。" }
  ],

  // Methods
  startQuiz: function(level) {
    // 受験者名入力は廃止
    this.userName = '';

    this.currentLevel = level;

    // レベル別に絞ってシャッフル
    const levelQuestions = this.database.filter(q => q.level === level);

    if (levelQuestions.length < this.NUM_QUESTIONS) {
      this.showMessage(`エラー: レベル${level}の問題が${this.NUM_QUESTIONS}問未満です。（${levelQuestions.length}問のみ）`);
      this.questions = this.shuffleArray([...levelQuestions]);
    } else {
      this.questions = this.shuffleArray([...levelQuestions]).slice(0, this.NUM_QUESTIONS);
    }

    this.currentIndex = 0;
    this.userAnswers = new Array(this.questions.length).fill(null);

    this.switchScreen('quiz-screen');
    this.updateQuestionDisplay();
  },

  submitAnswer: function() {
    const input = document.getElementById('answer-input');
    const answer = input.value.trim();

    // 現在の問題の回答を保存（上書き）
    this.userAnswers[this.currentIndex] = {
      question: this.questions[this.currentIndex],
      userText: answer || "（無回答）"
    };

    this.currentIndex++;

    if (this.currentIndex < this.questions.length) {
      this.updateQuestionDisplay();
    } else {
      document.getElementById('progress-bar').style.width = '100%';
      this.finishQuiz();
    }
  },

  goPrevQuestion: function() {
    if (this.currentIndex === 0) {
      this.showMessage('これが最初の問題です。');
      return;
    }

    // 今の回答も保存してから戻る（※保存先は currentIndex のまま）
    const input = document.getElementById('answer-input');
    if (input) {
      const answer = input.value.trim();
      this.userAnswers[this.currentIndex] = {
        question: this.questions[this.currentIndex],
        userText: answer || "（無回答）"
      };
    }

    this.currentIndex--;
    this.updateQuestionDisplay();
  },

  updateQuestionDisplay: function() {
    if (this.questions.length === 0) {
      this.finishQuiz();
      return;
    }

    const q = this.questions[this.currentIndex];

    document.getElementById('question-count').textContent =
      `Q ${this.currentIndex + 1} / ${this.questions.length}`;

    document.getElementById('question-text').textContent = q.text;

    const input = document.getElementById('answer-input');
    const saved = this.userAnswers[this.currentIndex];

    if (saved && typeof saved.userText === 'string') {
      input.value = saved.userText === "（無回答）" ? "" : saved.userText;
    } else {
      input.value = "";
    }
    input.focus();

    const progress = (this.currentIndex / this.questions.length) * 100;
    document.getElementById('progress-bar').style.width = `${progress}%`;

    const submitBtn = document.getElementById('submit-btn');
    submitBtn.textContent =
      (this.currentIndex === this.questions.length - 1)
      ? '回答を完了する'
      : '次へ進む';
  },

  copyToClipboardFallback: function(text, inputEl, messageEl) {
    let success = false;
    const tempTextarea = inputEl;

    try {
      tempTextarea.value = text;
      tempTextarea.select();
      tempTextarea.setSelectionRange(0, 99999);

      success = document.execCommand('copy');

      tempTextarea.value = text;
      tempTextarea.selectionEnd = tempTextarea.selectionStart;
      tempTextarea.blur();

      if (success) {
        messageEl.textContent = '✅ 回答内容をコピーしました！提出先に貼り付けてください。';
      } else {
        messageEl.textContent = '❌ 自動コピーに失敗しました。上のテキストエリアの内容を全選択・コピーして提出してください。';
        tempTextarea.select();
      }

    } catch (err) {
      console.error('Copy command failed:', err);
      messageEl.textContent = '❌ 自動コピーに失敗しました。上のテキストエリアの内容を全選択・コピーして提出してください。';
      tempTextarea.select();
    }
    messageEl.classList.remove('hidden');
    return success;
  },

  finishQuiz: function() {
    const levelNames = ["", "Lv1：基礎知識", "Lv2：システム理解", "Lv3：実践応用"];
    const levelName = levelNames[this.currentLevel] || "未選択コース";
    const date = new Date().toLocaleDateString('ja-JP');

    let reportText = ``;

    reportText += `----------------------------\n`;

    for (let i = 0; i < this.questions.length; i++) {
      const q = this.questions[i];
      const ansObj = this.userAnswers[i];
      const ansText = ansObj && typeof ansObj.userText === 'string'
        ? ansObj.userText
        : "（無回答）";

      reportText += `[Q${i + 1}] ${q.text}\n`;
      reportText += `回答：\n${ansText}\n`;
      reportText += `----------------------------\n`;
    }
    reportText += `自己評価・コメント：\n`;

    const sendTextEl = document.getElementById('send-text');
    sendTextEl.value = reportText;

    // mailtoは廃止し、常にコピー
    const actionBtn = document.getElementById('action-btn');
    const copyMessage = document.getElementById('copy-message');

    actionBtn.onclick = () => {
      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(reportText).then(() => {
          copyMessage.textContent = '✅ 回答内容をコピーしました！提出先に貼り付けてください。';
          copyMessage.classList.remove('hidden');
        }).catch(err => {
          console.warn('Clipboard API failed, using fallback.', err);
          this.copyToClipboardFallback(reportText, sendTextEl, copyMessage);
        });
      } else {
        this.copyToClipboardFallback(reportText, sendTextEl, copyMessage);
      }
    };

    this.switchScreen('result-screen');
  },

  shuffleArray: function(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  },

  switchScreen: function(screenId) {
    ['start-screen', 'quiz-screen', 'result-screen'].forEach(id => {
      const el = document.getElementById(id);
      if (!el) return;
      if (id === screenId) {
        el.classList.remove('hidden');
      } else {
        el.classList.add('hidden');
      }
    });
    window.scrollTo(0, 0);
  },

  showMessage: function(message) {
    const messageDiv = document.createElement('div');
    messageDiv.textContent = message;
    messageDiv.style.cssText =
      'position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);' +
      'background: white; padding: 20px; border-radius: 8px;' +
      'box-shadow: 0 4px 12px rgba(0,0,0,0.2); z-index: 1000; font-weight: bold;';
    document.body.appendChild(messageDiv);
    setTimeout(() => {
      document.body.removeChild(messageDiv);
    }, 2000);
  }
};

// DOM読み込み後のイベント付け
document.addEventListener('DOMContentLoaded', () => {
  const submitBtn = document.getElementById('submit-btn');
  const prevBtn = document.getElementById('prev-btn');

  if (submitBtn) {
    submitBtn.addEventListener('click', () => window.app.submitAnswer());
  }
  if (prevBtn) {
    prevBtn.addEventListener('click', () => window.app.goPrevQuestion());
  }
});
</script>
</body>
</html>

